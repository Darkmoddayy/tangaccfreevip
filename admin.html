<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ADMIN DARKMODDAYY</title>

<style>
body{
  background:#000;
  color:#00ffff;
  font-family:Arial;
  text-align:center;
}

.box{
  margin:30px auto;
  padding:20px;
  width:90%;
  max-width:600px;
  border:2px solid #00ffff;
  box-shadow:0 0 25px #00ffff;
}

button{
  padding:10px 25px;
  background:#00ffff;
  border:none;
  font-weight:bold;
  cursor:pointer;
  margin:5px;
  box-shadow:0 0 15px #00ffff;
}

input,textarea{
  width:90%;
  padding:10px;
  margin:5px;
}
li{
  margin:5px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="box" id="loginBox">
<h2>ğŸ” ADMIN LOGIN</h2>
<input type="password" id="pass">
<br>
<button onclick="login()">ÄÄƒng nháº­p</button>
<h3 id="msg"></h3>
</div>

<!-- PANEL -->
<div id="panel" style="display:none">

<div class="box">
<h2>ğŸ“¦ THÃŠM ACC</h2>

<input id="accInput" placeholder="tk|mk">
<br>
<button onclick="addAcc()">â• ThÃªm acc</button>

<textarea id="bulk" placeholder="Import nhiá»u acc má»—i dÃ²ng"></textarea>
<br>
<button onclick="addFast()">âš¡ ThÃªm nhanh</button>

<input type="file" id="fileTxt">
<br>
<button onclick="importTxt()">ğŸ“‚ Import TXT</button>

<button onclick="clearAll()">ğŸ§¹ XoÃ¡ ALL</button>
</div>

<div class="box">
<h2>ğŸ“Š THá»NG KÃŠ</h2>
<p>ğŸ“¦ Acc cÃ²n: <span id="totalAcc">0</span></p>
<p>ğŸ ÄÃ£ phÃ¡t: <span id="totalHistory">0</span></p>
<p>ğŸ‘¥ Online: <span id="online">0</span></p>
</div>

<div class="box">
<h2>ğŸ“‹ DANH SÃCH ACC</h2>
<ul id="list"></ul>
</div>

<div class="box">
<h2>ğŸ“œ Lá»ŠCH Sá»¬ NHáº¬N ACC</h2>
<div id="history"></div>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import {
getDatabase, ref, push, onValue, remove, set
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

const app = initializeApp({
apiKey:"AIzaSyCNeMxQYCA3C58k1RtC4XyKayQnk-xYxkg",
databaseURL:"https://tangaccfreevip-2f58c-default-rtdb.asia-southeast1.firebasedatabase.app"
});

const db = getDatabase(app);
const accRef = ref(db,"accounts");

/* LOGIN */
let fail=0;

window.login = ()=>{
if(pass.value==="123456"){
loginBox.style.display="none";
panel.style.display="block";
loadData();
}else{
fail++;
msg.innerHTML="âŒ Sai máº­t kháº©u";
if(fail>=5){
msg.innerHTML="ğŸ”’ KhÃ³a 5 phÃºt";
setTimeout(()=>fail=0,300000);
}
}
};

/* LOAD DATA */
function loadData(){

// ACCOUNTS
onValue(accRef,snap=>{
let html="";
let total=0;

snap.forEach(child=>{
total++;
html+=`
<li>
${child.val()}
<button onclick="delAcc('${child.key}')">ğŸ—‘</button>
</li>`;
});

list.innerHTML=html;
totalAcc.innerHTML=total;
});

// ONLINE
onValue(ref(db,"online"),snap=>{
online.innerHTML = snap.exists()?Object.keys(snap.val()).length:0;
});

// HISTORY
onValue(ref(db,"history"),snap=>{
let count=0;
let html="";

snap.forEach(child=>{
count++;
const data = child.val();

html+=`
<div>
ğŸ ${data.acc}<br>
ğŸ“± ${data.device}<br>
â° ${new Date(data.time).toLocaleString()}
<hr>
</div>`;
});

totalHistory.innerHTML=count;
history.innerHTML=html;
});

}

/* ADD 1 ACC */
window.addAcc = ()=>{
if(accInput.value.trim()!=""){
push(accRef,accInput.value);
accInput.value="";
}
};

/* ADD FAST */
window.addFast = ()=>{
bulk.value.split("\n").forEach(a=>{
if(a.trim()!="") push(accRef,a);
});
bulk.value="";
};

/* IMPORT TXT */
window.importTxt = async ()=>{
const file = fileTxt.files[0];
const text = await file.text();

text.split("\n").forEach(a=>{
if(a.trim()!="") push(accRef,a);
});
};

/* DELETE 1 */
window.delAcc = id=>{
remove(ref(db,"accounts/"+id));
};

/* CLEAR ALL */
window.clearAll = ()=>{
if(confirm("XoÃ¡ toÃ n bá»™ acc?")){
set(accRef,null);
}
};
</script>

</body>
</html>
