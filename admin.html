<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN</title>
</head>

<body>

<h2>T·ªïng acc: <span id="total">0</span></h2>

<input id="acc" placeholder="tk|mk">
<button onclick="addAcc()">Th√™m</button>

<br><br>

<textarea id="bulk" placeholder="tk1|mk1&#10;tk2|mk2"></textarea>
<br>
<button onclick="importAcc()">IMPORT</button>

<h3>Danh s√°ch acc</h3>
<div id="list"></div>

<button onclick="clearAll()">X√ìA T·∫§T C·∫¢</button>

<script type="module">

import { initializeApp } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";

import { 
getDatabase, ref, push, onValue, remove 
}
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";


const firebaseConfig = {
apiKey: "AIzaSyCNeMxQYCA3C58k1RtC4XyKayQnk-xYxkg",
authDomain: "tangaccfreevip-2f58c.firebaseapp.com",
databaseURL: "https://tangaccfreevip-2f58c-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId: "tangaccfreevip-2f58c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const accRef = ref(db,"accounts");


// üìä REALTIME
onValue(accRef,(snapshot)=>{

list.innerHTML="";

let count = 0;

snapshot.forEach(child=>{

count++;

const div = document.createElement("div");

div.innerHTML = `
${child.val()}
<button onclick="delAcc('${child.key}')">X</button>
`;

list.appendChild(div);

});

total.innerText = count;

});


// ‚ûï ADD
window.addAcc = function(){

if(acc.value!=""){
push(accRef, acc.value);
acc.value="";
}

}


// üì¶ IMPORT
window.importAcc = function(){

const lines = bulk.value.split("\n");

lines.forEach(line=>{
if(line.trim()!=""){
push(accRef,line.trim());
}
});

bulk.value="";

}


// ‚ùå DELETE
window.delAcc = function(key){
remove(ref(db,"accounts/"+key));
}


// üóë CLEAR
window.clearAll = function(){
remove(accRef);
}

</script>

</body>
</html>
