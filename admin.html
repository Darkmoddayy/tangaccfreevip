<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN PRO MAX</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;
  text-align:center;
}

.box{
  background:rgba(0,0,0,0.4);
  margin:20px auto;
  padding:20px;
  border-radius:15px;
  width:95%;
  max-width:500px;
  box-shadow:0 0 15px cyan;
}

input, textarea{
  width:90%;
  padding:12px;
  margin:8px;
  border:none;
  border-radius:8px;
}

button{
  padding:10px 15px;
  border:none;
  border-radius:8px;
  margin:5px;
  font-weight:bold;
  cursor:pointer;
}

.add{background:#00ffcc;}
.del{background:#ff4d4d;color:white;}
.import{background:orange;}
.logout{background:gray;color:white;}

.accItem{
  background:rgba(255,255,255,0.1);
  margin:5px;
  padding:8px;
  border-radius:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:13px;
}
</style>
</head>

<body>

<!-- ğŸ” LOGIN -->
<div class="box" id="loginBox">
<h2>ğŸ” ADMIN LOGIN</h2>
<input type="password" id="pass" placeholder="Nháº­p máº­t kháº©u">
<br>
<button onclick="login()">ÄÄƒng nháº­p</button>
<p id="msg"></p>
</div>


<!-- ğŸ‘‘ PANEL -->
<div class="box" id="panel" style="display:none">

<h3>ğŸ“Š Tá»•ng acc: <span id="total">0</span></h3>

<input type="text" id="acc" placeholder="tk|mk">
<button class="add" onclick="addAcc()">â• ThÃªm</button>

<h3>ğŸ“¦ Import hÃ ng loáº¡t</h3>
<textarea id="bulk" placeholder="tk1|mk1&#10;tk2|mk2"></textarea>
<button class="import" onclick="importAcc()">IMPORT</button>

<h3>ğŸ“‹ Danh sÃ¡ch acc</h3>
<div id="list"></div>

<button class="del" onclick="clearAll()">ğŸ—‘ XÃ“A Táº¤T Cáº¢</button>
<button class="logout" onclick="logout()">ğŸšª ÄÄƒng xuáº¥t</button>

</div>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove, child }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";


const firebaseConfig = {
  apiKey: "AIzaSyCNeMxQYCA3C58k1RtC4XyKayQnk-xYxkg",
  authDomain: "tangaccfreevip-2f58c.firebaseapp.com",
  databaseURL: "https://tangaccfreevip-2f58c-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "tangaccfreevip-2f58c",
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const accRef = ref(db,"accounts");


// ğŸ” PASSWORD
const ADMIN_PASS = "123456";

// ğŸ§  CHá»NG DÃ’
let fail = 0;
let lock = false;


window.login = function(){

  if(lock){
    msg.innerText="â›” Thá»­ láº¡i sau 30s";
    return;
  }

  if(pass.value === ADMIN_PASS){

    loginBox.style.display="none";
    panel.style.display="block";

    localStorage.setItem("admin","ok");

  }else{

    fail++;
    msg.innerText="âŒ Sai máº­t kháº©u ("+fail+")";

    if(fail>=5){
      lock=true;
      msg.innerText="â›” Bá»‹ khÃ³a 30s";
      setTimeout(()=>{
        lock=false;
        fail=0;
        msg.innerText="";
      },30000);
    }
  }
}


// ğŸšª AUTO LOGIN
if(localStorage.getItem("admin")){
  loginBox.style.display="none";
  panel.style.display="block";
}


// ğŸ“Š REALTIME TOTAL + LIST
onValue(accRef,(snap)=>{

  list.innerHTML="";
  let count=0;

  snap.forEach(data=>{

    count++;

    const div=document.createElement("div");
    div.className="accItem";

    div.innerHTML=`
      <span onclick="copyText('${data.val()}')">${data.val()}</span>
      <button onclick="delAcc('${data.key}')">âŒ</button>
    `;

    list.appendChild(div);

  });

  total.innerText=count;

});


// â• ADD
window.addAcc = function(){
  if(acc.value!=""){
    push(accRef,acc.value);
    acc.value="";
  }
}


// ğŸ“¦ IMPORT
window.importAcc = function(){

  const lines = bulk.value.split("\n");

  lines.forEach(acc=>{
    if(acc.trim()!=""){
      push(accRef,acc.trim());
    }
  });

  bulk.value="";
}


// âŒ DELETE 1
window.delAcc = function(key){
  remove(child(accRef,key));
}


// ğŸ—‘ CLEAR ALL
window.clearAll = function(){
  if(confirm("XÃ³a toÃ n bá»™ acc?")){
    remove(accRef);
  }
}


// ğŸ“‹ COPY
window.copyText = function(text){
  navigator.clipboard.writeText(text);
  alert("ÄÃ£ copy");
}


// ğŸšª LOGOUT
window.logout = function(){
  localStorage.removeItem("admin");
  location.reload();
}

</script>

</body>
</html>
