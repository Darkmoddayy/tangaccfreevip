<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ADMIN</title>
<style>
body{background:#000;color:#0ff;text-align:center;font-family:Arial}
.box{border:2px solid #0ff;margin:20px;padding:20px;box-shadow:0 0 15px #0ff}
</style>
</head>

<body>

<div id="loginBox" class="box">
<h2>ğŸ” ADMIN</h2>
<input type="password" id="pass">
<br><br>
<button onclick="login()">LOGIN</button>
<p id="msg"></p>
</div>

<div id="dashboard" class="box" style="display:none">

<h3>ğŸ“Š Tá»•ng acc: <span id="total"></span></h3>

<textarea id="importBox" placeholder="tk|mk"></textarea>
<br><br>
<button onclick="importAcc()">IMPORT</button>

<div id="list"></div>

</div>

<script type="module">

import { firebaseConfig } from "./config.js";
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.login = function(){
if(document.getElementById("pass").value==="123456"){
loginBox.style.display="none";
dashboard.style.display="block";
load();
}else{
msg.innerHTML="Sai máº­t kháº©u";
}
}

function load(){
onValue(ref(db,"acc"),snap=>{
total.innerHTML=snap.size;
let html="";
snap.forEach(i=>{
html+=`<p>${i.val()} <button onclick="delAcc('${i.key}')">X</button></p>`
})
list.innerHTML=html;
})
}

window.importAcc=function(){
let lines=importBox.value.split("\n");
lines.forEach(acc=>{
if(acc.trim()!=""){
push(ref(db,"acc"),acc.trim())
}
})
alert("ÄÃ£ thÃªm");
}

window.delAcc=function(id){
remove(ref(db,"acc/"+id));
}

</script>
</body>
</html>
