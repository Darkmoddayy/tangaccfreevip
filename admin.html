<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ADMIN DARKMODDAYY</title>

<style>
body{background:#000;color:#0ff;font-family:sans-serif;text-align:center}
.box{border:1px solid #0ff;padding:15px;margin:15px;border-radius:12px;box-shadow:0 0 15px #0ff}
input,textarea{width:90%;padding:10px;margin:5px;border-radius:8px;border:none}
button{padding:10px 20px;margin:5px;border:none;border-radius:10px;background:#0ff;color:#000;font-weight:bold}
</style>
</head>

<body>

<div id="loginBox" class="box">
<h2>ğŸ” ADMIN LOGIN</h2>
<input type="password" id="pass" placeholder="Máº­t kháº©u">
<button onclick="login()">ÄÄƒng nháº­p</button>
<div id="msg"></div>
</div>

<div id="panel" style="display:none">

<h2>âš¡ DARKMODDAYY CONTROL</h2>

<div class="box">
<h3>ğŸ“Š Tá»•ng acc: <span id="total">0</span></h3>
<h3>ğŸ‘¥ Online: <span id="online">0</span></h3>
</div>

<div class="box">
<h3>â• ThÃªm acc</h3>
<input id="user" placeholder="User">
<input id="passacc" placeholder="Pass">
<button onclick="addAcc()">ThÃªm</button>
</div>

<div class="box">
<h3>ğŸ“‚ Import acc</h3>
<textarea id="import" rows="6" placeholder="user|pass"></textarea>
<button onclick="importAcc()">Import</button>
</div>

<div class="box">
<h3>ğŸ“¦ Danh sÃ¡ch acc</h3>
<div id="list"></div>
</div>

<div class="box">
<h3>ğŸ† Top user</h3>
<div id="top"></div>
</div>

<div class="box">
<h3>ğŸ“ˆ User theo ngÃ y</h3>
<div id="day"></div>
</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

const firebaseConfig = {
apiKey:"AIzaSyCNeMxQYCA3C58k1RtC4XyKayQnk-xYxkg",
authDomain:"tangaccfreevip-2f58c.firebaseapp.com",
databaseURL:"https://tangaccfreevip-2f58c-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId:"tangaccfreevip-2f58c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const accRef = ref(db,"acc");
const userRef = ref(db,"users");
const onlineRef = ref(db,"online");

let fail = 0;

window.login = function(){

if(localStorage.getItem("lockTime") > Date.now()){
msg.innerHTML="â›” Bá»‹ khÃ³a, thá»­ láº¡i sau";
return;
}

if(pass.value==="123456"){
loginBox.style.display="none";
panel.style.display="block";
}else{
fail++;
msg.innerHTML="Sai máº­t kháº©u";
if(fail>=5){
localStorage.setItem("lockTime",Date.now()+300000);
msg.innerHTML="â›” Sai 5 láº§n, khÃ³a 5 phÃºt";
}
}
}

window.addAcc = function(){
push(accRef,{user:user.value,pass:passacc.value});
}

window.importAcc = function(){

const lines = document.getElementById("import").value.split("\n");

lines.forEach(line=>{
const [u,p] = line.split("|");
if(u && p) push(accRef,{user:u,pass:p});
});

}

onValue(accRef,snap=>{
total.innerText = snap.size || 0;

list.innerHTML="";
snap.forEach(s=>{
list.innerHTML+=`
<div>
${s.val().user}
<button onclick="del('${s.key}')">âŒ</button>
</div>`;
});
});

window.del = function(key){
remove(ref(db,"acc/"+key));
}

onValue(onlineRef,snap=>{
online.innerText = snap.size || 0;
});

onValue(userRef,snap=>{

let topHTML="";
let dayHTML="";
let topData={};
let dayData={};

snap.forEach(s=>{

const d = s.val();

topData[d.device]=(topData[d.device]||0)+1;

dayData[d.date]=(dayData[d.date]||0)+1;

});

for(let i in topData){
topHTML+=`ğŸ‘¤ ${i} : ${topData[i]}<br>`;
}

for(let i in dayData){
dayHTML+=`ğŸ“… ${i} : ${dayData[i]}<br>`;
}

top.innerHTML=topHTML;
day.innerHTML=dayHTML;

});

</script>
</body>
</html>
