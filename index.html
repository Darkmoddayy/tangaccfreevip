<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ğŸ Táº·ng Acc VIP</title>

<style>
body{
background:#0f0f0f;
color:#0ff;
text-align:center;
font-family:Arial;
}
button{
padding:15px;
background:#0ff;
border:none;
margin:10px;
font-size:18px;
box-shadow:0 0 15px #0ff;
}
#acc{margin-top:20px;font-size:20px;}
</style>
</head>

<body>

<h2>ğŸ NHáº¬N ACC VIP FREE</h2>
<button onclick="getAcc()">NHáº¬N ACC</button>

<div id="loading"></div>
<div id="acc"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import {
getDatabase, ref, onValue, get, child, remove, set, update
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyCNeMxQYCA3C58k1RtC4XyKayQnk-xYxkg",
authDomain: "tangaccfreevip-2f58c.firebaseapp.com",
databaseURL: "https://tangaccfreevip-2f58c-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId: "tangaccfreevip-2f58c",
storageBucket: "tangaccfreevip-2f58c.firebasestorage.app",
messagingSenderId: "970018428565",
appId: "1:970018428565:web:3d8b15dc15b29977386d9c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const device = localStorage.getItem("device") || Math.random().toString(36).substr(2);
localStorage.setItem("device",device);

const today = new Date().toLocaleDateString();

//// ONLINE
set(ref(db,"online/"+device),true);
window.onbeforeunload = ()=> set(ref(db,"online/"+device),null);

//// RESET NGÃ€Y
if(localStorage.getItem("date")!=today){
localStorage.setItem("date",today);
localStorage.setItem("count",0);
}

//// LINK4M
const link4m = "https://link4m.co/st?api=69100b1afc003f0eba59c189&url=";

window.getAcc = async function(){

if(localStorage.getItem("count")>=2){
alert("âŒ Má»—i ngÃ y chá»‰ nháº­n 2 acc");
return;
}

loading.innerHTML="â³ Äang kiá»ƒm tra vÆ°á»£t link...";
setTimeout(()=>{

if(!document.referrer.includes("link4m")){
location.href = link4m + location.href;
return;
}

showAcc();

},3000);

}

async function showAcc(){

const snapshot = await get(ref(db,"accounts"));

let list=[];
snapshot.forEach(i=>{
list.push({key:i.key,acc:i.val().acc});
});

if(list.length==0){
acc.innerHTML="âŒ Háº¿t acc";
return;
}

let random = list[Math.floor(Math.random()*list.length)];

acc.innerHTML="ğŸ‰ "+random.acc;

remove(ref(db,"accounts/"+random.key));

//// Äáº¾M
let count = Number(localStorage.getItem("count")||0)+1;
localStorage.setItem("count",count);

//// STATS
update(ref(db,"stats/"+today),{
value: (await get(ref(db,"stats/"+today+"/value"))).val()+1 || 1
});

//// TOP USER
update(ref(db,"top/"+device),{
value: (await get(ref(db,"top/"+device+"/value"))).val()+1 || 1
});

}
</script>
</body>
</html>
